> Подписывайтесь на паблик во ВКонтакте →
> [Чат-боты](https://vk.com/botsforchats)

## Содержание
1. [Установка](#Установка)
2. [Настройка](#Настройка)
3. [Запуск](#Запуск)
4. [Добавление команд](#Добавление-команд)

## Установка
#### Требования
* Ubuntu 16.04
* Node.js >=6.0.0

##### Node.js & npm
```
curl -sL https://deb.nodesource.com/setup_7.x | sudo -E bash -
sudo apt-get install -y nodejs
```

##### PM2
```
sudo npm i -g pm2
```

##### Клонируем проект и устанавливаем зависимости
```
git clone https://github.com/olnaz/node-vkbot.git
cd node-vkbot
npm i
```

## Настройка
#### Создание приложения
Перейдите по ссылке [vk.com/apps](https://vk.com/apps?act=manage) и создайте собственное Standalone-приложение.  
Добавьте в ваше приложение execute-методы из папки **_/execute**. (имя файла = название метода)  

#### Редактирование файлов
* _src/accounts.default.js_  
Здесь находится информация об аккаунтах ботов. Ботов может быть несколько.

* _src/config.default.js_  
Основной конфиг приложения.

После завершения редактирования данных файлов, необходимо убрать у них постфиксы ".default".

## Запуск
Все команды выполняются в корневой директории проекта.  

##### Запуск ботов
```
node ./src/main
```

## Добавление команд
Все команды, которые выполняет бот, находятся в папке **commands**. Имя файла является основным названием команды. 

##### Пример команды
```javascript
// command.js

'use strict';

/**
 * Функция, которая будет выполнения при вызове команды
 * @param  {Arguments}  arg
 * @param  {Function}   callback
 * @public
 */
function run (arg, callback) {
  return callback(null, 'Result');
}

/**
 * Каждая команда должна возвращать объект такого вида.
 * @type {Object}
 */
module.exports = {
  /**
   * Статус команды: true - активна
   * @type {Boolean}
   */
  enabled: true, 

  /**
   * Уникальность команды
   *
   * false   - команда доступна и в личных сообщениях, и в беседах
   * 'mchat' - команда доступна только в беседах
   * 'pm'    - команда доступна только в личных сообщениях
   * 
   * @type {Boolean/String}
   */
  unique: false, 

  /**
   * Доступность команды
   *
   * 0 - доступна всем
   * 1 - доступна тем, кто пригласил бота в беседу (и выше)
   * 2 - доступна создателю беседы (и выше)
   * 3 - доступна VIP-пользователям (и выше)
   * 4 - доступна только администраторам
   *
   * Source: middlewares/permissions.js
   * 
   * @type {Number}
   */
  mask: 0, 

  /**
   * Алиасы команды
   * @type {Array}
   */
  aliases: ['alias1', 'alias2'], 

  /**
   * Описание команды
   * @type {String}
   */
  description: 'Command example', 

  /**
   * Пример использования команды
   * @type {String}
   */
  use: '/command <argument> [optional argument]', 

  /**
   * Функция, которая будет выполнения при вызове команды
   */
  run
}
```
